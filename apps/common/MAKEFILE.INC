CLASSIFIER_DIR=$(MAP_SOURCE)\FLIBRT

AUTOGEN_DIR=$(OUTPUT_DIR)\autogen
HARDCODED_CLASSIFIER=$(AUTOGEN_DIR)\flib_txt.asm

$(AUTOGEN_DIR): $(OUTWARD_DIR)
  $(ENSURE_TARGET_DIR)

CLASSIFIER_FILES=$(CLASSIFIER_DIR)\FLIBRT.ACD $(CLASSIFIER_DIR)\FLIBRT.ATN $(CLASSIFIER_DIR)\FLIBRT.DAT $(CLASSIFIER_DIR)\FLIBRT.RAS $(CLASSIFIER_DIR)\FLIBRT.TXT

$(HARDCODED_CLASSIFIER): $(AUTOGEN_DIR) $(CONVERT) $(CLASSIFIER_FILES)
        $(CONVERT) /console /classifier:$(CLASSIFIER_DIR)\ /oc:$@

DATA_DIR=data
APP_MAP_DATA=$(AUTOGEN_DIR)\$(MAP_NAME).asm $(DATA_DIR)\$(MAP_NAME).c00 $(DATA_DIR)\$(MAP_NAME).d00

$(APP_MAP_DATA): $(AUTOGEN_DIR) $(CONVERT) $(CLASSIFIER_FILES)
  $(CONVERT) /console /classifier:$(CLASSIFIER_DIR)\ /ms:$(MAP_SOURCE)\$(MAP_NAME) /md:$(DATA_DIR)\$(MAP_NAME) /od:$(AUTOGEN_DIR)\$(MAP_NAME).asm

update:: $(HARDCODED_CLASSIFIER) $(APP_MAP_DATA)
